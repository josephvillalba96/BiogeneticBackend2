<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Factura {{ factura.id_factura }}</title>
  <style>
    @media print {
      body { margin: 0; }
    }
  </style>
</head>
<body style="margin:0; padding:40px; font-family:Arial,Helvetica,sans-serif; background:#fff; color:#000;">

  <!-- MARCO LETTER 8.5x11" -->
  <div style="width:215.9mm; min-height:279.4mm; margin:0 auto; box-sizing:border-box;">

    <!-- ENCABEZADO -->
    <header style="border-bottom:1px solid #000; padding-bottom:15px; margin-bottom:25px;">
      <div style="display:flex; justify-content:space-between; align-items:flex-end;">
        <div>
          <h1 style="margin:0; font-size:22px; font-weight:700;">Biogenetic S.A.S</h1>
          <p style="margin:2px 0 0; font-size:12px; color:#555;">FACTURA DE VENTA</p>
          <div style="margin-top:8px; font-size:11px; color:#666;">
            <div><strong>NIT:</strong> 900.123.456-7</div>
            <div><strong>Regimen:</strong> Responsable de IVA</div>
            <div><strong>Ciudad:</strong> Bogotá D.C.</div>
          </div>
        </div>
        <div style="text-align:right;">
          <div style="font-size:13px; color:#555;">Número de Factura</div>
          <div style="font-size:18px; font-weight:700;">{{ factura.id_factura }}</div>
        </div>
      </div>
    </header>

    <!-- SECCIÓN CLIENTE Y FECHAS -->
    <section style="display:flex; gap:40px; margin-bottom:30px;">
      <div style="flex:1;">
        <h2 style="margin:0 0 8px; font-size:14px; text-transform:uppercase; letter-spacing:1px;">DATOS DEL CLIENTE</h2>
        <div style="font-size:13px; line-height:1.6;">
          <div><strong>Razón Social:</strong> {{ cliente.nombre }}</div>
          <div><strong>NIT/CC:</strong> {{ cliente.documento }}</div>
          <div><strong>ID Cliente:</strong> {{ cliente.id_formatted }}</div>
          <div><strong>Email:</strong> {{ cliente.email }}</div>
          <div><strong>Teléfono:</strong> {{ cliente.telefono or 'No registrado' }}</div>
        </div>
      </div>
      <div style="flex:1;">
        <h2 style="margin:0 0 8px; font-size:14px; text-transform:uppercase; letter-spacing:1px;">INFORMACIÓN FISCAL</h2>
        <div style="font-size:13px; line-height:1.6;">
          <div><strong>Fecha de Emisión:</strong> {{ factura.fecha_generacion }}</div>
          <div><strong>Fecha de Pago:</strong> {{ factura.fecha_pago }}</div>
          <div><strong>Fecha de Vencimiento:</strong> {{ factura.fecha_vencimiento }}</div>
          <div><strong>Estado de Pago:</strong> {{ factura.estado }}</div>
          <div><strong>Regimen:</strong> Responsable de IVA</div>
          <div><strong>Aplica IVA:</strong> {{ factura.aplica_iva }}</div>
        </div>
      </div>
    </section>

    <!-- DESCRIPCIÓN -->
    <section style="margin-bottom:30px;">
      <h2 style="margin:0 0 8px; font-size:14px; text-transform:uppercase; letter-spacing:1px;">Concepto de la Factura</h2>
      <p style="margin:0; font-size:13px;">{{ factura.descripcion }}</p>
    </section>

    <!-- PRODUCTOS/SERVICIOS -->
    <section style="margin-bottom:30px;">
      <h2 style="margin:0 0 12px; font-size:14px; text-transform:uppercase; letter-spacing:1px;">DETALLE DE PRODUCTOS/SERVICIOS</h2>
      
      <!-- Tabla de productos -->
      <table style="width:100%; border-collapse:collapse; font-size:13px; margin-bottom:15px;">
        <thead>
          <tr style="background-color:#f5f5f5; border-bottom:2px solid #000;">
            <th style="text-align:left; padding:8px; border:1px solid #ddd;">Descripción</th>
            <th style="text-align:center; padding:8px; border:1px solid #ddd; width:80px;">Cantidad</th>
            <th style="text-align:right; padding:8px; border:1px solid #ddd; width:100px;">Valor Unitario</th>
            <th style="text-align:right; padding:8px; border:1px solid #ddd; width:100px;">Valor Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr style="border-bottom:1px solid #ddd;">
            <td style="padding:8px; border:1px solid #ddd;">{{ item.nombre }}</td>
            <td style="text-align:center; padding:8px; border:1px solid #ddd;">1</td>
            <td style="text-align:right; padding:8px; border:1px solid #ddd;">{{ item.valor }}</td>
            <td style="text-align:right; padding:8px; border:1px solid #ddd; font-weight:bold;">{{ item.valor }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>

    <!-- TOTALES -->
    <section style="margin-top:25px; border-top:2px solid #000; padding-top:15px; text-align:right; font-size:13px;">
      <div style="display:flex; justify-content:space-between; max-width:280px; margin-left:auto; padding:5px 0;">
        <span><strong>SUBTOTAL</strong></span>
        <span>{{ factura.monto_base }}</span>
      </div>
      <div style="display:flex; justify-content:space-between; max-width:280px; margin-left:auto; padding:5px 0; border-top:1px solid #ddd;">
        <span><strong>IVA ({{ factura.iva_porcentaje }})</strong></span>
        <span>{{ factura.valor_iva }}</span>
      </div>
      <div style="display:flex; justify-content:space-between; max-width:280px; margin-left:auto; margin-top:10px; padding:8px 0; font-size:16px; font-weight:700; border-top:2px solid #000; background-color:#f9f9f9;">
        <span>TOTAL A PAGAR</span>
        <span>{{ factura.monto_total }}</span>
      </div>
    </section>

  </div>
</body>
</html>